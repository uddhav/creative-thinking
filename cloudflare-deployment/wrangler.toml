name = "creative-thinking-mcp"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# KV namespace for session storage
[[kv_namespaces]]
binding = "KV"
id = "creative_thinking_sessions"
preview_id = "creative_thinking_sessions_preview"

# Durable Objects configuration
[[durable_objects.bindings]]
name = "CREATIVE_THINKING_AGENT"
class_name = "CreativeThinkingMcpAgent"

# Migration for Durable Objects with SQL
[[migrations]]
tag = "v1"
new_sqlite_classes = ["CreativeThinkingMcpAgent"]

# Workers AI binding (optional, for future AI enhancements)
[ai]
binding = "AI"

# Environment variables
[vars]
ENVIRONMENT = "production"
LOG_LEVEL = "info"
# Authentication - Replace these in production
AUTH_DEMO_USERNAME = "demo"
AUTH_DEMO_API_KEY = "demo-api-key"

# Development settings
[env.development]
vars = { ENVIRONMENT = "development", LOG_LEVEL = "debug" }

# Route configuration (uncomment when deploying to custom domain)
# [[routes]]
# pattern = "creative-thinking.example.com/*"
# zone_name = "example.com"

# Limits - Increased for complex thinking techniques
[limits]
cpu_ms = 200

# Observability
[observability]
enabled = true

# Rate limiting (Cloudflare's built-in rate limiting)
# Configure via Cloudflare dashboard or API for production
# Example configuration (not directly in wrangler.toml):
# - 100 requests per minute per IP for /mcp endpoint
# - 10 requests per minute per IP for /authorize endpoint
# - Burst of 20 requests allowed

# Tail Workers (for logging)
[[tail_consumers]]
service = "creative-thinking-logger"

# Build configuration
[build]
command = "npm run build"